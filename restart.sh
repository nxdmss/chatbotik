#!/bin/bash

# ===============================================
# ๐ ะะซะกะขะะซะ ะะะะะะะะฃะกะ
# ===============================================

echo "๐ ะะซะกะขะะซะ ะะะะะะะะฃะกะ"

# ะััะฐะฝะฐะฒะปะธะฒะฐะตะผ ะฒัะต
echo "๐ ะััะฐะฝะฐะฒะปะธะฒะฐะตะผ..."
pkill -9 python 2>/dev/null || true
pkill -9 python3 2>/dev/null || true
sleep 1

# ะัะฒะพะฑะพะถะดะฐะตะผ ะฟะพัั
echo "๐ ะัะฒะพะฑะพะถะดะฐะตะผ ะฟะพัั 8000..."
lsof -ti:8000 | xargs kill -9 2>/dev/null || true
sleep 1

# ะะฐะฟััะบะฐะตะผ ัะตัะฒะตั
echo "๐ ะะฐะฟััะบะฐะตะผ ัะตัะฒะตั..."
python3 perfect_server.py &
sleep 3

# ะัะพะฒะตััะตะผ
if curl -s http://localhost:8000 > /dev/null 2>&1; then
    echo "โ ะกะตัะฒะตั ัะฐะฑะพัะฐะตั ะฝะฐ http://localhost:8000"
    echo "๐ ะะฐะถะผะธัะต ะทะตะปะตะฝัั ะบะฝะพะฟะบั '๐ ะะดะผะธะฝ' ะฒ ะฝะฐะฒะธะณะฐัะธะธ"
else
    echo "โ ะกะตัะฒะตั ะฝะต ะทะฐะฟัััะธะปัั"
fi
