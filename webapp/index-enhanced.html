<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–ú–∞–≥–∞–∑–∏–Ω</title>
    
    <!-- –°—Ç–∏–ª–∏ -->
    <link rel="stylesheet" href="/webapp/static/styles-enhanced.css">
    
    <!-- Telegram WebApp Script -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    
    <!-- –ò–∫–æ–Ω–∫–∏ (Font Awesome) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="app">
        <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
        <main class="main">
            <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∫–∞—Ç–∞–ª–æ–≥–∞ -->
            <div id="catalog-page" class="page active">
                <!-- –ü–æ–∏—Å–∫ -->
                <div class="search-container">
                    <span class="search-icon">üîç</span>
                    <input type="text" 
                           id="search" 
                           placeholder="–ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–æ–≤..." 
                           autocomplete="off">
                    <button class="search-clear" style="display: none;">‚úï</button>
                </div>
                
                <!-- –§–∏–ª—å—Ç—Ä—ã –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º -->
                <div class="categories-container mb-3">
                    <div class="categories-scroll">
                        <button class="category-btn active" data-category="all">
                            –í—Å–µ —Ç–æ–≤–∞—Ä—ã
                        </button>
                        <!-- –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                    </div>
                </div>
                
                <!-- –°–µ—Ç–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤ -->
                <div id="products-grid"></div>
            </div>
            
            <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∫–æ—Ä–∑–∏–Ω—ã -->
            <div id="cart-page" class="page">
                <div class="page-header">
                    <h1>üõí –ö–æ—Ä–∑–∏–Ω–∞</h1>
                </div>
                
                <div id="cart-items"></div>
                
                <div class="cart-total-container" style="display: none;">
                    <div class="cart-total-row">
                        <span class="cart-total-label">–ò—Ç–æ–≥–æ:</span>
                        <span id="cart-total" class="cart-total-value">0 ‚ÇΩ</span>
                    </div>
                    <button class="btn btn-primary btn-lg w-100" onclick="window.mobileShopApp.processCheckout()">
                        <span class="btn-icon">üí≥</span>
                        <span class="btn-text">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</span>
                    </button>
                </div>
            </div>
            
            <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–æ—Ñ–∏–ª—è -->
            <div id="profile-page" class="page">
                <div class="page-header">
                    <h1>üë§ –ü—Ä–æ—Ñ–∏–ª—å</h1>
                </div>
                
                <div class="profile-container">
                    <div class="profile-card">
                        <div class="profile-avatar" id="user-avatar">
                            üë§
                        </div>
                        <h2 id="user-name">–ì–æ—Å—Ç—å</h2>
                        <p id="user-id" class="text-secondary"></p>
                    </div>
                    
                    <div class="profile-section mt-4">
                        <h3 class="mb-2">üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h3>
                        <div class="stats-grid">
                            <div class="stat-card">
                                <div class="stat-value" id="stat-orders">0</div>
                                <div class="stat-label">–ó–∞–∫–∞–∑–æ–≤</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value" id="stat-total">0 ‚ÇΩ</div>
                                <div class="stat-label">–ü–æ—Ç—Ä–∞—á–µ–Ω–æ</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="profile-section mt-4">
                        <h3 class="mb-2">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</h3>
                        <button class="btn btn-outline w-100 mb-2">
                            <span class="btn-icon">üîî</span>
                            <span class="btn-text">–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</span>
                        </button>
                        <button class="btn btn-outline w-100 mb-2">
                            <span class="btn-icon">üìû</span>
                            <span class="btn-text">–ü–æ–¥–¥–µ—Ä–∂–∫–∞</span>
                        </button>
                        <button class="btn btn-outline w-100">
                            <span class="btn-icon">‚ÑπÔ∏è</span>
                            <span class="btn-text">–û –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏</span>
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å -->
            <div id="admin-page" class="page">
                <div class="page-header">
                    <h1>‚öôÔ∏è –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</h1>
                </div>
                
                <div class="admin-stats mb-4">
                    <div class="stat-card">
                        <div class="stat-value" id="admin-stat-products">0</div>
                        <div class="stat-label">–¢–æ–≤–∞—Ä–æ–≤</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="admin-stat-orders">0</div>
                        <div class="stat-label">–ó–∞–∫–∞–∑–æ–≤</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="admin-stat-revenue">0 ‚ÇΩ</div>
                        <div class="stat-label">–í—ã—Ä—É—á–∫–∞</div>
                    </div>
                </div>
                
                <div class="admin-actions mb-4">
                    <button class="btn btn-primary" onclick="showAddProductModal()">
                        <span class="btn-icon">‚ûï</span>
                        <span class="btn-text">–î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä</span>
                    </button>
                    <button class="btn btn-outline" onclick="window.location.reload()">
                        <span class="btn-icon">üîÑ</span>
                        <span class="btn-text">–û–±–Ω–æ–≤–∏—Ç—å</span>
                    </button>
                </div>
                
                <div id="admin-products-list"></div>
            </div>
        </main>
        
        <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
        <nav class="nav">
            <a href="#" class="nav-item active" data-page="catalog">
                <span class="nav-icon">üè†</span>
                <span class="nav-label">–ö–∞—Ç–∞–ª–æ–≥</span>
            </a>
            <a href="#" class="nav-item" data-page="cart">
                <span class="nav-icon">üõí</span>
                <span class="nav-label">–ö–æ—Ä–∑–∏–Ω–∞</span>
                <span class="cart-badge" style="display: none;">0</span>
            </a>
            <a href="#" class="nav-item" data-page="profile">
                <span class="nav-icon">üë§</span>
                <span class="nav-label">–ü—Ä–æ—Ñ–∏–ª—å</span>
            </a>
            <a href="#" class="nav-item admin-only" data-page="admin" style="display: none;">
                <span class="nav-icon">‚öôÔ∏è</span>
                <span class="nav-label">–ê–¥–º–∏–Ω</span>
            </a>
        </nav>
    </div>
    
    <!-- –°–∫—Ä–∏–ø—Ç—ã -->
    <script src="/webapp/static/ui-components.js"></script>
    <script src="/webapp/static/app-enhanced.js"></script>
    
    <style>
        /* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü */
        .page-header {
            margin-bottom: var(--spacing-lg);
        }
        
        .page-header h1 {
            font-size: 28px;
            font-weight: 700;
            color: var(--text-primary);
        }
        
        .w-100 {
            width: 100%;
        }
        
        .profile-card {
            background: var(--bg-secondary);
            border-radius: var(--border-radius);
            padding: var(--spacing-xl);
            text-align: center;
            box-shadow: var(--shadow-medium);
        }
        
        .profile-avatar {
            width: 80px;
            height: 80px;
            margin: 0 auto var(--spacing-md);
            background: linear-gradient(135deg, var(--color-primary), var(--color-primary-dark));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 40px;
            box-shadow: 0 8px 24px rgba(59, 130, 246, 0.3);
        }
        
        .profile-card h2 {
            font-size: 24px;
            margin-bottom: var(--spacing-sm);
            color: var(--text-primary);
        }
        
        .profile-section {
            background: var(--bg-secondary);
            border-radius: var(--border-radius);
            padding: var(--spacing-lg);
            box-shadow: var(--shadow-small);
        }
        
        .profile-section h3 {
            font-size: 18px;
            color: var(--text-primary);
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: var(--spacing-md);
        }
        
        .stat-card {
            background: var(--bg-tertiary);
            border-radius: var(--border-radius-small);
            padding: var(--spacing-lg);
            text-align: center;
            transition: all var(--transition-normal);
        }
        
        .stat-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-medium);
        }
        
        .stat-value {
            font-size: 28px;
            font-weight: 700;
            color: var(--color-primary);
            margin-bottom: var(--spacing-xs);
        }
        
        .stat-label {
            font-size: 13px;
            color: var(--text-secondary);
        }
        
        .admin-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: var(--spacing-md);
        }
        
        .admin-actions {
            display: flex;
            gap: var(--spacing-md);
            flex-wrap: wrap;
        }
        
        .admin-actions .btn {
            flex: 1;
            min-width: 150px;
        }
        
        .categories-container {
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
            scrollbar-width: none;
        }
        
        .categories-container::-webkit-scrollbar {
            display: none;
        }
        
        .categories-scroll {
            display: flex;
            gap: var(--spacing-sm);
            padding-bottom: var(--spacing-sm);
        }
        
        .category-btn {
            flex-shrink: 0;
            padding: 8px 16px;
            background: var(--bg-secondary);
            border: 2px solid var(--border-color);
            border-radius: 20px;
            color: var(--text-secondary);
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all var(--transition-fast);
            white-space: nowrap;
        }
        
        .category-btn:hover {
            background: var(--bg-tertiary);
            border-color: var(--color-primary);
            color: var(--text-primary);
        }
        
        .category-btn.active {
            background: var(--color-primary);
            border-color: var(--color-primary);
            color: white;
        }
        
        .admin-only {
            display: none !important;
        }
        
        body.is-admin .admin-only {
            display: flex !important;
        }
        
        @media (max-width: 768px) {
            .admin-stats {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .admin-stats .stat-card:nth-child(3) {
                grid-column: 1 / -1;
            }
        }
        
        @media (max-width: 480px) {
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .admin-stats {
                grid-template-columns: 1fr;
            }
            
            .admin-stats .stat-card:nth-child(3) {
                grid-column: 1;
            }
        }
    </style>
</body>
</html>
