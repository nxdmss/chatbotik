#!/bin/bash

echo "๐ ะะะะะะะะะะ REPLIT ะงะะะะ GITHUB"
echo "================================="

# ะััะฐะฝะฐะฒะปะธะฒะฐะตะผ ะฒัะต ะฟัะพัะตััั
echo "๐ ะััะฐะฝะฐะฒะปะธะฒะฐะตะผ ะฟัะพัะตััั..."
pkill -f python 2>/dev/null || true

# ะฃะดะฐะปัะตะผ ะบะพะฝัะปะธะบััััะธะต ัะฐะนะปั
echo "๐งน ะัะธัะฐะตะผ ะบะพะฝัะปะธะบััััะธะต ัะฐะนะปั..."
rm -f requirements.txt
rm -f shop.db
rm -f *.pyc

# ะะฑะฝะพะฒะปัะตะผ ะฟัะพะตะบั
echo "๐ฅ ะะฑะฝะพะฒะปัะตะผ ะฟัะพะตะบั ะธะท GitHub..."
git fetch origin
git reset --hard origin/main

# ะะตัะตะทะฐะฟััะบะฐะตะผ ัะตัะฒะตั
echo "๐ ะะฐะฟััะบะฐะตะผ ะฝะพะฒัะน ัะตัะฒะตั..."
python3 simple_telegram_bot.py &

# ะะดะตะผ ะทะฐะฟััะบะฐ
sleep 3

# ะัะพะฒะตััะตะผ ัะฐะฑะพัั
echo "๐ ะัะพะฒะตััะตะผ ัะฐะฑะพัั ัะตัะฒะตัะฐ..."
if curl -s http://localhost:8000 > /dev/null; then
    echo "โ ะกะตัะฒะตั ัะฐะฑะพัะฐะตั ะพัะปะธัะฝะพ!"
    echo "๐ WebApp: http://localhost:8000"
    echo "๐ฑ ะะพัะพะฒ ะบ ะฝะฐัััะพะนะบะต Telegram ะฑะพัะฐ!"
else
    echo "โ ะัะธะฑะบะฐ ัะตัะฒะตัะฐ"
fi

echo "================================="
echo "๐ ะะะะะะะะะะ ะะะะะะจะะะ!"
echo "================================="
