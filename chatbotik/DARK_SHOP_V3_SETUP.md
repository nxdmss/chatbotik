# 🌙 DARK SHOP V3 - С ФОТОГРАФИЯМИ И РЕДАКТИРОВАНИЕМ

## ✅ **Новые возможности V3:**

### 📷 **Фотографии:**
- ✅ **Загрузка фото** к товарам
- ✅ **Предпросмотр** загружаемых изображений
- ✅ **Отображение фото** в каталоге и админ панели
- ✅ **Автоматическое сжатие** и оптимизация

### ✏️ **Редактирование товаров:**
- ✅ **Редактирование** существующих товаров
- ✅ **Удаление** товаров
- ✅ **Список товаров** в админ панели
- ✅ **Кнопки управления** для каждого товара

### 🎨 **Улучшенный интерфейс:**
- ✅ **Список товаров** в админ панели
- ✅ **Кнопки редактирования** и удаления
- ✅ **Форма редактирования** с предзаполненными данными
- ✅ **Предпросмотр изображений** при загрузке

## 🚀 **Как запустить V3 в Replit:**

### **1. Остановите старый сервер:**
```bash
pkill -f python
```

### **2. Запустите новую версию V3:**
```bash
python3 dark_shop_bot_v3.py
```

### **3. Или обновите проект:**
```bash
git pull origin main
python3 dark_shop_bot_v3.py
```

## 🌐 **Доступ к приложению:**

- **WebApp:** http://localhost:8000
- **Новые функции:** Фотографии, редактирование, удаление
- **Админ панель:** Полное управление товарами

## 🎯 **Функциональность V3:**

### **📦 Каталог:**
- Товары с фотографиями
- 2 колонки компактного вида
- Поиск по названию
- Добавление в корзину

### **🛒 Корзина:**
- Управление количеством
- Счетчик товаров
- Удаление товаров
- Оформление заказа

### **⚙️ Админ панель:**
- **Список всех товаров** с миниатюрами
- **Кнопки редактирования** (✏️) и удаления (🗑️)
- **Форма добавления** новых товаров
- **Загрузка фотографий** с предпросмотром
- **Редактирование** существующих товаров

## 📷 **Работа с фотографиями:**

### **Добавление фото:**
1. В админ панели нажмите "📷 Выбрать фото"
2. Выберите изображение (JPG, PNG, GIF)
3. Увидите предпросмотр
4. Нажмите "➕ Добавить товар"

### **Редактирование фото:**
1. В админ панели нажмите "✏️" у нужного товара
2. Форма заполнится текущими данными
3. Выберите новое фото или оставьте старое
4. Нажмите "💾 Сохранить изменения"

## 🔧 **API Endpoints V3:**

- `GET /api/products` - Список товаров
- `POST /api/add-product` - Добавить товар
- `POST /api/update-product/{id}` - Обновить товар
- `POST /api/delete-product/{id}` - Удалить товар
- `GET /uploads/{filename}` - Получить изображение

## 🎨 **Интерфейс админ панели:**

```
┌─────────────────────────────────────┐
│ ⚙️ Панель администратора            │
├─────────────────────────────────────┤
│ 📷 [Фото] Название товара     ✏️ 🗑️  │
│ 📷 [Фото] Другой товар        ✏️ 🗑️  │
│ ...                              │
├─────────────────────────────────────┤
│ Форма добавления/редактирования:    │
│ • Название товара                  │
│ • Цена                             │
│ • Категория                        │
│ • Описание                         │
│ • 📷 Выбрать фото                  │
│ [➕ Добавить товар]                 │
└─────────────────────────────────────┘
```

## 🔧 **Если что-то не работает:**

### **1. Полная перезагрузка:**
```bash
pkill -f python
rm -f shop.db
python3 dark_shop_bot_v3.py
```

### **2. Проверка работы:**
```bash
curl http://localhost:8000
```

### **3. Проверка API:**
```bash
curl http://localhost:8000/api/products
```

### **4. Проверка загрузки фото:**
```bash
ls -la uploads/
```

## 📱 **Для Telegram бота:**

### **1. Установите BOT_TOKEN:**
```
BOT_TOKEN=your_bot_token_here
```

### **2. Настройте WebApp URL:**
```
/setmenubutton → URL: https://your-repl-name.repl.co
```

### **3. Протестируйте:**
- Найдите бота в Telegram
- `/start` → "🛍️ Открыть магазин"
- Перейдите в админ панель
- Добавьте товар с фото!

## 🎉 **Готово!**

Теперь у вас есть:
- ✅ **Загрузка фотографий** к товарам
- ✅ **Редактирование товаров** с сохранением фото
- ✅ **Удаление товаров**
- ✅ **Список товаров** в админ панели
- ✅ **Предпросмотр изображений**
- ✅ **Полное управление** товарами

**Наслаждайтесь полнофункциональным магазином с фотографиями!** 🌙📷✨
