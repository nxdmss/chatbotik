<!DOCTYPE html>
<html>
<head>
    <title>–¢–µ—Å—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞</title>
    <meta charset="utf-8">
</head>
<body>
    <h1>–¢–µ—Å—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞</h1>
    
    <form id="testForm">
        <p>
            <label>–ù–∞–∑–≤–∞–Ω–∏–µ:</label><br>
            <input type="text" id="title" value="–¢–µ—Å—Ç–æ–≤—ã–π —Ç–æ–≤–∞—Ä" required>
        </p>
        
        <p>
            <label>–¶–µ–Ω–∞:</label><br>
            <input type="number" id="price" value="100" required>
        </p>
        
        <p>
            <label>–û–ø–∏—Å–∞–Ω–∏–µ:</label><br>
            <input type="text" id="description" value="–û–ø–∏—Å–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞">
        </p>
        
        <p>
            <button type="submit">–î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä</button>
        </p>
    </form>
    
    <div id="result"></div>
    
    <script>
        document.getElementById('testForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const title = document.getElementById('title').value;
            const price = document.getElementById('price').value;
            const description = document.getElementById('description').value;
            
            console.log('–û—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ:', { title, price, description });
            
            try {
                const response = await fetch('/api/products', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'X-Admin-Password': 'admin123'
                    },
                    body: JSON.stringify({
                        title: title,
                        price: parseInt(price),
                        description: description,
                        image: 'üì¶',
                        photo: ''
                    })
                });
                
                const result = await response.json();
                console.log('–û—Ç–≤–µ—Ç —Å–µ—Ä–≤–µ—Ä–∞:', result);
                
                document.getElementById('result').innerHTML = 
                    '<h3>–†–µ–∑—É–ª—å—Ç–∞—Ç:</h3>' +
                    '<pre>' + JSON.stringify(result, null, 2) + '</pre>';
                
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞:', error);
                document.getElementById('result').innerHTML = 
                    '<h3>–û—à–∏–±–∫–∞:</h3>' +
                    '<pre>' + error.message + '</pre>';
            }
        });
    </script>
</body>
</html>
